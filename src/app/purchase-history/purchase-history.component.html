
<ng-template #invoice id="invoice" >  
    <div class="modal-header">  
      <h4 class="modal-title pull-left">Invoice</h4> 
      
      <button mat-icon-button color="primary" (click)="modalRef.hide()" aria-label="Close model">
        <mat-icon>cancel</mat-icon>
    </button> 
    </div>  
    <div class="modal-body" id="divInvoice">
        <div >
            <div align="center">
                <table padding="10" id="tableClass">
                    <tr>
                        <td style="width: 150px"> Book title</td>
                        <td style="width: 150px">Price</td>
                    </tr>
                    <tr>
                        <td style="width: 150px"> {{ paymentObject.bookTitle }}</td>
                        <td style="width: 150px">{{ paymentObject.price }}</td>
                    </tr>
                </table>
            </div>
        </div>
    </div>
    <div class="modal-footer">
        <button mat-icon-button color="primary" (click)="DownloadInvoice()" aria-label="Download invoice">
            <mat-icon>cloud_download</mat-icon>
        </button>
        <button mat-icon-button color="primary" (click)="modalRef.hide()" aria-label="Close model">
            <mat-icon>cancel</mat-icon>
        </button>
    </div>
  </ng-template>  

<ng-template #readBook >  
    <div class="modal-header">  
      <h4 class="modal-title pull-left">{{ paymentObject.bookTitle }}</h4> 
      
      <button mat-icon-button color="primary" (click)="modalRef.hide()" aria-label="Close model">
        <mat-icon>cancel</mat-icon>
    </button> 
    </div>  
    <div class="modal-body" id="invoiceModel">
        <div >
            <div align="center">
               <p>{{ paymentObject.bookTitle }}</p>
            </div>
        </div>
    </div>
    <div class="modal-footer">  
        <button mat-icon-button color="primary" (click)="modalRef.hide()" aria-label="Close model">
            <mat-icon>cancel</mat-icon>
        </button> 
    </div>  
  </ng-template> 

<div fxLayoutAlign="center center" style="margin-top: 2%;">
    <mat-card fxFlex="75">
        <div class="mat-elevation-z8">
            <table mat-table [dataSource]="dataSource"   id="booksTable">
                <ng-container matColumnDef="bookLogo">
                    <th mat-header-cell *matHeaderCellDef> Logo </th>
                    <td mat-cell *matCellDef="let element"> 
                        <img src="../../assets/images/bookicon.png" alt="Book logo">
                    </td>
                </ng-container>
                <ng-container matColumnDef="bookTitle">
                    <th mat-header-cell *matHeaderCellDef> Book title </th>
                    <td mat-cell *matCellDef="let element"> {{element.bookTitle}}</td>
                </ng-container>

                <ng-container matColumnDef="publisher">
                    <th mat-header-cell *matHeaderCellDef> Publisher </th>
                    <td mat-cell *matCellDef="let element"> {{element.publisher}}</td>
                </ng-container>
        
                <ng-container matColumnDef="price">
                    <th mat-header-cell *matHeaderCellDef> Price </th>
                    <td mat-cell  *matCellDef="let element"> {{element.price}} </td>
                </ng-container>
        
                <ng-container matColumnDef="purchaseDate">
                    <th mat-header-cell *matHeaderCellDef> Purchase date </th>
                    <td mat-cell  *matCellDef="let element"> {{element.paymentDate | date:'dd-MM-yyyy'}} </td>
                </ng-container>
                <ng-container matColumnDef="actions">
                    <th mat-header-cell *matHeaderCellDef> </th>
                    <td mat-cell  *matCellDef="let element"> 
                        <button mat-raised-button color="primary" (click)="OpenInvoiceModel(invoice, element.bookId)">Invoice</button>&nbsp;&nbsp;
                        <button  mat-raised-button color="primary" (click)="GetRefund(element.paymentId, element.paymentDate)">Refund</button>&nbsp;&nbsp;
                        <button mat-raised-button color="primary" (click)="ReadBook(readBook,  element.bookId)">Read book</button>
                    </td>
                </ng-container>
        
                <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
                <tr mat-row *matRowDef="let row; columns: displayedColumns;"></tr>
            </table>
            <mat-paginator [pageSizeOptions]="[5, 10, 15, 20, 40, 80]" [pageSize]="5" showFirstLastButtons></mat-paginator>
        </div>
        
    </mat-card>
</div>
