
<!-- <div class="container border" style="margin-top: 8%">
    <div class="row">
        <form ngNativeValidate>
            <div class="row mt-3">
                <div class="form-group row">
                    <div class="col-md-1 offset-3">
                        <label for="userName">Email</label>
                    </div>
                    <div class="col-md-4">
                         <input type="text"  id="email" name="email"  [(ngModel)]="paymentObject.email"  placeholder="Enter email" class="form-control" required/>
                    </div>
                    <div class="col-md-3"></div>
                </div>
            </div>
            <div class="row mt-3">
                <div class="form-group row">
                    <div class="col-md-5"></div>
                    <div class="col-md-2" align="center">
                         <button class="btn btn-primary btn-block form-control" (click)="GetPaymentHistory()" > Search  </button>
                    </div>
                    <div class="col-md-5"></div>
                </div>
            </div>
        </form>
        
    </div>
    <br/>
    <div class="row" *ngIf="payments.length">
        <div class="table-responsive" id="divBook">
            <div class="table-responsive">
                <table class="table table-striped border">
                    <thead>
                        <tr class="table-secondary">
                            <th>Book Title</th>
                            <th>Price</th>
                            <th>Email</th>
                            <th>Paymemt date</th>
                            <th></th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr *ngFor = "let pay of payments">
                            <td>{{pay.bookTitle}}</td>
                            <td>{{pay.price}}</td>
                            <td>{{pay.email}}</td>
                            <td>{{pay.paymentDate}}</td>
                            <td>
                                <a class="btn btn-info  text-white" type="button"  (click)="OpenInvoiceModel(template, pay.bookId)">Invoice</a>
                                <a class="btn btn-info  text-white" type="button"  (click)="GetRefund(pay.paymentId, pay.paymentDate)" style="margin-left : 4px">Refund</a>
                                <a class="btn btn-info  text-white" type="button"  (click)="ReadBook(readBook,  pay.bookId)" style="margin-left : 4px">Read book</a>
                            </td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </div>
    </div>

    <ng-template #template >  
        <div class="modal-header">  
          <h4 class="modal-title pull-left">Invoice</h4> 
          
          <button type="button" class="close pull-right" aria-label="Close" (click)="modalRef.hide()">  
            <span aria-hidden="true">×</span>  
          </button>  
        </div>  
        <div class="modal-body" id="invoiceModel">
            <div >
                <div align="center">
                    <table padding="10" id="tableClass">
                        <tr>
                            <td style="width: 150px"> Book title</td>
                            <td style="width: 150px">Price</td>
                        </tr>
                        <tr>
                            <td style="width: 150px"> {{ paymentObject.bookTitle }}</td>
                            <td style="width: 150px">{{ paymentObject.price }}</td>
                        </tr>
                    </table>
                </div>
            </div>
        </div>
        <div class="modal-footer">  
          <button type="button" printSectionId="invoiceModel" ngxPrint><i class="fa-solid fa-print"></i></button>
          <button type="button" class="btn btn-default" (click)="modalRef.hide()">Close</button>  
        </div>  
      </ng-template>  

      


</div> -->

<ng-template #readBook >  
    <div class="modal-header">  
      <h4 class="modal-title pull-left">{{ paymentObject.bookTitle }}</h4> 
      
      <button type="button" class="close pull-right" aria-label="Close" (click)="modalRef.hide()">  
        <span aria-hidden="true">×</span>  
      </button>  
    </div>  
    <div class="modal-body" id="invoiceModel">
        <div >
            <div align="center">
               <p>{{ paymentObject.bookTitle }}</p>
            </div>
        </div>
    </div>
    <div class="modal-footer">  
      <button type="button" class="btn btn-default" (click)="modalRef.hide()">Close</button>  
    </div>  
  </ng-template> 

<div fxLayoutAlign="center center" style="margin-top: 2%;">
    <mat-card fxFlex="75">
        <div class="mat-elevation-z8">
            <table mat-table [dataSource]="dataSource"   >
                <ng-container matColumnDef="bookTitle">
                    <th mat-header-cell *matHeaderCellDef> Book title </th>
                    <td mat-cell *matCellDef="let element"> {{element.bookTitle}}</td>
                </ng-container>
        
                <ng-container matColumnDef="price">
                    <th mat-header-cell *matHeaderCellDef> Price </th>
                    <td mat-cell  *matCellDef="let element"> {{element.price}} </td>
                </ng-container>
        
                <ng-container matColumnDef="purchaseDate">
                    <th mat-header-cell *matHeaderCellDef> Purchase date </th>
                    <td mat-cell  *matCellDef="let element"> {{element.paymentDate}} </td>
                </ng-container>
                <ng-container matColumnDef="actions">
                    <th mat-header-cell *matHeaderCellDef> </th>
                    <td mat-cell  *matCellDef="let element"> 
                        <button mat-button color="primary">Invoice</button>
                        <button mat-button color="primary" (click)="GetRefund(element.paymentId, element.paymentDate)">Refund</button>
                        <button mat-button color="primary" (click)="ReadBook(readBook,  element.bookId)">Read book</button>
                    </td>
                </ng-container>
        
                <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
                <tr mat-row *matRowDef="let row; columns: displayedColumns;"></tr>
            </table>
            <mat-paginator #paginatorPageSize [pageSizeOptions]="pageSizes" showFirstLastButtons></mat-paginator>
        </div>
        
    </mat-card>
    
</div>
